#demographics.tab-pane.fade
	.mt-3
	script(src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js")
	
	.row
		.col-md-4
			.card
				h4.card-header.text-center Show Types
				.card-body
					canvas#show-types(width="400" height="400")
		.col-md-8
			.card
				h4.card-header.text-center Submissions by City
				.card-body
					p (Graph only shows cities with more than one submission)
					canvas#hometowns
	.row.mt-3
		.col-md-8.offset-md-4
			.box.box-b
				.box-head.box-bb
					h4.text-center Submission Home Theaters
				table.table.box-table
					thead
						tr
							th Theater
							th Count
					tbody
						for theater in theaters
							tr
								td #{theater.name}
								td #{theater.count}


	script.
		Chart.defaults.global.defaultFontSize = 16

		// SHOW TYPES
		new Chart(document.getElementById('show-types').getContext('2d'), {
			type: 'pie',
			data: {
				labels: ["Improv", "Sketch", "Stand-Up", "Variety", "Podcast", "Performer", "Other"],
				datasets: [{
					backgroundColor: ['#5DA5DA','#FAA43A','#60BD68','#F17CB0','#B2912F','#B276B2','#DECF3F','#F15854','#4D4D4D'],
					borderColor: 'white',
					data: [
						#{demographics.improv},
						#{demographics.sketch},
						#{demographics.standup},
						#{demographics.variety},
						#{demographics.podcast},
						#{demographics.performer},
						#{demographics.other}
					],
				}]
			}
		})

		// HOME TOWNS
		var hometownNames = !{JSON.stringify(Object.values(filteredHometownNames)).replace(/<\//g, '<\\/')}
		var hometownCounts = !{JSON.stringify(Object.values(filteredHometownCounts)).replace(/<\//g, '<\\/')}
		hometownNames
		new Chart(document.getElementById('hometowns').getContext('2d'), {
			type: 'horizontalBar',
			data: {
				labels: hometownNames,
				datasets: [{ 
					label: "Submissions",
					backgroundColor: '#5DA5DA',
					data: hometownCounts
				}]
			},
			options: {
				legend: { display: false},
				scales: { xAxes: [{ ticks: { beginAtZero: true }}]}
			}
		})